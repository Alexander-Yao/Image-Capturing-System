
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv=”Access-Control-Allow-Origin" content="*">
  <title>index</title>
  <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<div>
    <button type="button" class="layui-btn layui-btn-normal" id="zoom_in">Zoom in</button>
    <button type="button" class="layui-btn layui-btn-normal" id="zoom_out">Zoom out</button>
    <button type="button" class="layui-btn layui-btn-normal" id="back">back</button>

    <div class="layui-row" id="test2">

    </div>


</div>



<!-- 引入 layui.js 的 <script> 标签最好放置在 html 末尾 -->
<script src="layui/layui.js"></script>
<script>
    layui.use(function(){
        $ = layui.$
       ,layer = layui.layer
      ,form = layui.form
      ,laypage = layui.laypage
      ,element = layui.element
      ,laydate = layui.laydate
      ,util = layui.util;

        $("#back").click(function() {
				window.history.back(-1)

			})




        let bing = getParameter("bing")
        let google = getParameter("google")
        let osm = getParameter("osm")
        let lat = getParameter('lat')
        let lon = getParameter("lon")
        let tileZoom = getParameter('tileZoom')
        let multi = getParameter('multi')
        console.log(multi)


        $(".zoom_in").on('click',function (){
            $.ajax({
                type:"get",
                contentType: 'application/json; charset=UTF-8',
                url:"lon=" + lon + "&lat= " + lat + "&tileZoom= " + tileZoom + "&multi=" + multi+1,
                success:function (data) {

                     var str = '';
                    //Google
                    str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                    str += '<p>Bing</p>';
                    str += '<img src=../' + data.bing + '>';
                    str += '</div>';
                    //BIng

                    str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                    str += '<p>Google</p>';
                    str += '<img src=../' + data.google + '>';
                    str += '</div>';
                    //OSM
                    str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                    str += '<p>OSM</p>';
                    str += '<img src=../' + data.osm + '>';
                    str += '</div>';
                    location.reload()
                     $("#test2").append(str);
                }
            })
        });


        console.log(bing)
        var bing_arr = bing.split(",")
        var google_arr = google.split(",")
        var osm_arr = osm.split(",")
        var str = ''
        //渲染Bing
        str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
        str += '<p>Bing</p>';
        for (const v of bing_arr){
              str +='<div class="layui-col-md6">';
              str += '<img src=../' + v + '>';
              str +='</div>';

        }
        str += '</div>';
        console.log(str)
        //渲染Goole


        str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
        str += '<p>Google</p>';
        for (const v of google_arr){
              str +='<div class="layui-col-md6">';
              str += '<img src=../' + v + '>';
              str +='</div>';

        }
        str += '</div>';
        //渲染OSM
        str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
        str += '<p>OSM</p>';
        for (const v of osm_arr){
              str +='<div class="layui-col-md6">';
              str += '<img src=../' + v + '>';
              str +='</div>';

        }
        str += '</div>';

        $("#test2").append(str);




        function getParameter(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)","i");
            var r = location.search.substr(1).match(reg);
            if (r!=null) return (r[2]); return null;
            }



});
</script>
</body>
</html>
